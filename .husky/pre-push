#!/bin/bash

echo -e "===\n>> Pre-push Hook: Checking branch name / ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð²ÐµÑ‚ÐºÑƒ..."

BRANCH=`git rev-parse --abbrev-ref HEAD`
PROTECTED_BRANCHES="^(master|release)"

if [[ "$BRANCH" =~ $PROTECTED_BRANCHES ]]
then
  echo -e "\nðŸš« Cannot push to remote $BRANCH branch, please create your own branch and use PR."
  echo -e "ðŸš« ÐÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ð¿ÑƒÑˆÐ¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² $BRANCH, ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐ²Ð¾ÑŽ Ð²ÐµÑ‚ÐºÑƒ Ð¿Ð¾ Ð½Ð°ÑˆÐ¸Ð¼ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€ÐµÐ½Ð½Ð¾ÑÑ‚ÑÐ¼ Ð¸ Ð·Ð°Ð¿ÑƒÑˆÑŒÑ‚Ðµ Ð¸Ð·Ð¼Ð½ÐµÐ½Ð¸Ñ Ñ‚ÑƒÐ´Ð°.\n" && exit 1
fi

echo -e ">> Finish checking branch name / Ð—Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ð» Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð² Ð²ÐµÑ‚ÐºÐµ.\n==="

exit 0